<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>NavyBerry Management System</title>
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="script.js"></script>
    <script defer src="FarmerManagement.js"></script>
    <script defer src="Product.js"></script>
    <script defer src="Sales.js"></script>
    <script src="Inventory.js" defer></script>
    <script src="Finance.js" defer></script>
    <script src="Report.js" defer></script>

  </head>
  <body>
    <header>
      <a href="index.html" class="factory-logo">
        <img src="assets/logo.png" alt="Logo" width="50px" />
        <h3>NavyBerry Management System</h3>
      </a>
      <div>
        <button onclick="router('farmer')">Supplier Management</button>
        <button onclick="router('product')">
          Product Categorization and Packaging
        </button>
        <button onclick="router('sales')">Sales Management</button>
        <button onclick="router('finance')">Financial Analysis</button>
        <button onclick="router('inventory')">Inventory Management</button>
        <button onclick="router('report')">Report</button>

      </div>
    </header>

    <main>
      <h3 style="text-align: center">Money:  <span id="money">(!! js not loaded i guess !!)</span>ðŸ’² </h3>
      <h3 class="hidden">avg price of berry : <span id="avgPriceOfBerry">js not loaded bruvvv</span></h3>
      <section id="farmer">
        <h2>Farmers Management</h2>
        <nav>
          <div>
            <button onclick="show('farmer-form')">Add Farmer</button>
            <button onclick="show('updateFarmerForm')">Update Farmer</button>
            <button id="exportFarmerBtn">Export Farmer Details to csv</button>
          </div>
          <div>
            <button onclick="show('searchFarmerForm')">Search Farmer by Name</button>
            <button onclick="show('searchFarmerByCityForm')"> Search Farmer by City</button>
            <button onclick="show('searchFarmerByRegionForm')">Search Farmer by Region</button>
          </div>
          <div>
            <button onclick="show('product-form')">Buy Product</button>
            <button onclick="show('listPurchasesByDateForm')">List purchase logs by time</button>
            <button onclick="show('listPurchasesByFarmer')">List purchase logs by farmer</button>
            <button onclick="show('expenseCalc')"> Calculate Expense</button>

          </div>

        </nav>
          <h3 class="">Available Non-Categorized Blueberry Amount: <span id="nonCatAmount">js not loaded</span> kg</h3>
        <form id="farmer-form">
            <h3>Add farmer:</h3>
            <input
              id="farmer-id"
              placeholder="Farmer's ID"
              required
              type="number"
            />
            <input
              id="farmer-name"
              placeholder="Farmer's Name"
              required
              type="text"
            />
            <input
              id="farmer-phone"
              placeholder="Tel No"
              required
              type="number"
            />
            <input
              id="farmer-email"
              placeholder="Email"
              required
              type="email"
            />
            <input
              id="farmer-address"
              placeholder="City"
              required
              type="text"
            />
            <input
              id="farmer-region"
              placeholder="Region"
              required
              type="text"
            />
            <!--TODO: add type checking-->
            <button type="submit">Add Farmer</button>
          </form>

          <form id="updateFarmerForm">
            <h3>Update Farmer:</h3>
            <label for="selectFarmer">Select Farmer to update</label>
            <select
              id="selectFarmer"
              name="selectFarmer"
              onchange="populateUpdateFields()"
            >
              <option id="nullOption" value="null">Choose one</option>
            </select>

            <input
              id="u-farmer-name"
              placeholder="Farmer's Name"
              required
              type="text"
            />
            <input
              id="u-farmer-phone"
              placeholder="Tel No"
              required
              type="number"
            />
            <input
              id="u-farmer-email"
              placeholder="Email"
              required
              type="email"
            />
            <input
              id="u-farmer-address"
              placeholder="City"
              required
              type="text"
            />
            <input
              id="u-farmer-region"
              placeholder="Region"
              required
              type="text"
            />
            <button type="submit">edit farmer</button>
          </form>

          <form id="searchFarmerForm">
            <label for="farmerSearchByName">Search Farmer By Name</label>
            <input
              id="farmerSearchByName"
              name="farmerSearch"
              placeholder="Selahattin Kara"
              type="text"
            />
            <button type="submit">Search farmer</button>
          </form>
          <form id="searchFarmerByCityForm">
            <label for="farmerSearchByCity">Search Farmer By City</label>
            <input
              id="farmerSearchByCity"
              name="farmerSearch"
              placeholder="MuÄŸla"
              type="text"
            />
            <button type="submit">Search farmer</button>
          </form>
          <form id="searchFarmerByRegionForm">
            <label for="farmerSearchByRegion">Search Farmer By Region</label>
            <input
              id="farmerSearchByRegion"
              name="farmerSearch"
              placeholder="Karadeniz"
              type="text"
            />
            <button type="submit">Search farmer</button>
          </form>

          <form id="product-form">
            <h3>Buy product</h3>
            <label for="pID">Purchase ID</label>
            <input id="pID" name="" placeholder="Purchase ID" type="number" min="0" required />
            <label for="selectFarmerForProduct">Select Farmer from dropdown</label>
            <select id="selectFarmerForProduct" name="selectFarmer" required>
              <option id="nullOptionForProduct" value="null">
                Choose Farmer
              </option>
            </select>

<!--            <select id="" name="">-->
<!--              <option value="fresh">Fresh</option>-->
<!--              <option value="frozen">Frozen</option>-->
<!--              <option value="organic">Organic</option>-->
<!--            </select>-->
            <label for="pDate">Select Date of purchase</label>
            <input id="pDate" name="" type="date" required />
            <label for="pQuantity">Enter the amount of products</label>
            <input
              id="pQuantity"
              name=""
              placeholder="Quantity of product in kgs"
              type="number"
              required
              min=0
            />
            <label for="pPrice">Enter price per kilogram</label>
            <input id="pPrice" name="" placeholder="30" type="number" required min="1"/>

            <button type="submit">Buy Product</button>
          </form>

          <form id="expenseCalc" action="">
            <h3>Calculate Expense </h3>

            <label for="start-date">Start Date</label>
            <input type="date" name="start-date" id="start-date" required>
            <label for="start-date">Ending Date</label>
            <input type="date" name="end-date" id="end-date" required>
            <button type="submit">Calculate Total Expenses</button>
            <p>Total expenses between <span id="expenseText"></span></p>

          </form>

          <form id="listPurchasesByDateForm">
            <h3>List purchase logs by time periods</h3>
            <label for="start-date">Start Date</label>
            <input type="date" name="start-date" id="start-date-f" required>
            <label for="start-date">Ending Date</label>
            <input type="date" name="end-date" id="end-date-f" required>
            <button type="submit">List purchase logs by date</button>

          </form>

          <form id="listPurchasesByFarmer">
            <h3>List purchase logs by farmer</h3>
            <label for="selectFarmerForPurchase">
              Choose farmer
            </label><select name="" id="selectFarmerForPurchase">
              <option id="nullOptionForPurchase " value="null">
                Choose Farmer
              </option>
            </select>
            <button type="submit">List purchase logs by farmer</button>
          </form>



        <div class="table-container">
          <table id="farmerTable">
            <caption>Farmers </caption>
            <thead>
            <tr>
              <th>Farmer ID</th>
              <th>Farmer Name </th>
              <th>Farmer Cellphone</th>
              <th>Farmer Email</th>
              <th>Farmer City</th>
              <th>Farmer Region</th>
              <th>Farmer Actions</th>
            </tr>
            </thead>
            <tbody>
              <!-- js inserts stuff here -->
            </tbody>
          </table>
        </div>
        <div class="table-container">
          <table id="purchasesFromFarmerTable">
            <caption>Purchase Logs </caption>
            <thead>
            <tr>
              <th>Purchase ID</th>
              <th>Purchased From </th>
              <th>Date of purchase</th>
              <th>Purchased Amount</th>
              <th>Price per KG</th>
              <th>Total Price</th>

            </tr>
            </thead>
            <tbody>
            <!-- js inserts stuff here -->
            </tbody>
          </table>
        </div>


      </section>


      <section id="product">

        <h2>Products</h2>
        <nav>
          <button onclick="show('packageForm')">Package Products</button>
          <button onclick="show('categoryPriceForm')">Set prices for categories</button>
          <button onclick="show('lowStockAlert')">Set alerts for categories</button>
        </nav>
        <h3 class="">Available Non-Categorized Blueberry Amount: <span id="nonCatAmount2">js not loaded</span> kg</h3>


          <form id="packageForm">
            <h3>Package products</h3>
            <label for="packageCategories">Choose category</label>

            <select id="packageCategories" name="categories" onchange="handleCategory()" required>
              <option value="Small">Small (100g)</option>
              <option value="Medium">Medium (250g)</option>
              <option value="Large">Large (500g)</option>
              <option value="Extra Large">Extra Large (1kg)</option>
              <option value="Family Pack">Family Pack (2kg)</option>
              <option value="Bulk Pack">Bulk Pack (5kg)</option>
              <option value="Premium">Premium (custom weight)</option>
            </select>


            <div id="premiumWeightInput" class="hidden">

              <label for="premiumWeight"> Set amount for premium</label>
              <input

                id="premiumWeight"
                min="0"
                placeholder="kg"
                type="number"
              />
            </div>

            <label for="packageDate">Enter date of packaging:</label>
            <input type="date" name="" id="packageDate" required>

            <label for="packageBerryAmount">Amount of berries to packet</label>
            <input
              id="packageBerryAmount"
              min="0"
              name=""
              placeholder="Enter amount of berries to pack"
              type="number"
              required
            />
            <button type="submit">Package it</button>
          </form>

          <form id="categoryPriceForm">
            <h3>Set prices for categories</h3>
            <label for="categoriesForPrice"> Choose a category </label>
            <select id="categoriesForPrice" name="categories" onchange="handlePriceField()">
              <option value="Small">Small (100g)</option>
              <option value="Medium">Medium (250g)</option>
              <option value="Large">Large (500g)</option>
              <option value="Extra Large">Extra Large (1kg)</option>
              <option value="Family Pack">Family Pack (2kg)</option>
              <option value="Bulk Pack">Bulk Pack (5kg)</option>
              <option value="Premium">Premium (custom weight)</option>
            </select>
            <label for="categoryPrice">Set/Update Price</label>
            <input id="categoryPrice" min="0" name="" type="number" />
            <button type="submit">Set Price</button>
          </form>


        <form id="lowStockAlert">
          <h3>Set alerts for categories</h3>
          <label for="categoriesForAlert"> Choose a category </label>
          <select id="categoriesForAlert" name="categories" onchange="handleAlertField()">
            <option value="Non-Categorized">Non-Categorized</option>
            <option value="Small">Small (100g)</option>
            <option value="Medium">Medium (250g)</option>
            <option value="Large">Large (500g)</option>
            <option value="Extra Large">Extra Large (1kg)</option>
            <option value="Family Pack">Family Pack (2kg)</option>
            <option value="Bulk Pack">Bulk Pack (5kg)</option>
            <option value="Premium">Premium (custom weight)</option>

         </select>
          <label for="alertAmount">Set/Update Alert</label>
          <input id="alertAmount" min="0" name="" type="number" />
          <button type="submit">Set Alert</button>

        </form>

        <div class="table-container">
          <table id="categoryPriceTable">
            <caption>
              Category Prices
            </caption>
            <thead>
              <tr>
                <th>Category</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>cat 1</th>
                <th>200$</th>
              </tr>
            </tbody>
          </table>

        </div>
        <div class="table-container">

          <table id="inventoryTrackingTable">
            <caption>
              Inventory Tracking
            </caption>
            <thead>
              <tr>
                <th>Category</th>
                <th>Stock Level</th>
                <th>Total Kilos</th>
                <th>Info</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <th>Small</th>
                <th>100</th>
                <th>10</th>
                <th>STOCKS ARE LOW!</th>
              </tr>
            </tbody>
          </table>
        </div>

      </section>



      <section id="sales">
        <h2>Sales Management</h2>
        <nav>
          <button onclick="show('order-form')">Sell product to customers</button>
          <button onclick="show('editSaleForm')">Edit Sale</button>
          <button onclick="show('listByStatus')">List Sales by status</button>
          <button onclick="show('listByCategory')">List Sales by category</button>
          <button onclick="show('listByCustomer')">List Sales by Customer</button>

        </nav>
        <form id="order-form">
          <h3>Sell product to Customers</h3>
          <label for="order-id">Order ID:</label>
          <input id="order-id" name="order-id" required type="number" />
          <label for="order-date">Enter date of sale:</label>
          <input type="date" name="" id="order-date" required>
          <label for="customer-name">Customer Name:</label>
          <input id="customer-name" name="customer-name" required type="text" />
          <label for="customer-contact">Customer Telephone:</label>
          <input
            id="customer-contact"
            name="customer-contact"
            min="0"
            minlength="10"
            required
            type="number"
          />
          <label for="customer-shipping">Shipping Information:</label>
          <input
            id="customer-shipping"
            name="customer-shipping"
            required
            type="text"
          />
          <label for="product-category">Product Category:</label>
          <select id="product-category" name="product-category" required>
            <option value="Small">Small (100g)</option>
            <option value="Medium">Medium (250g)</option>
            <option value="Large">Large (500g)</option>
            <option value="Extra Large">Extra Large (1kg)</option>
            <option value="Family Pack">Family Pack (2kg)</option>
            <option value="Bulk Pack">Bulk Pack (5kg)</option>
            <option value="Premium">Premium (custom weight)</option>
          </select>
          <label for="quantity-ordered">Quantity Ordered:</label>
          <input
            id="quantity-ordered"
            name="quantity-ordered"
            required
            type="number"
          />
<!--          <label for="unit-price">Price per category:</label>-->

<!--          <input id="unit-price" name="unit-price" required type="number" />-->
          <label for="order-status">Order Status:</label>
          <select id="order-status" name="order-status" required>
            <option value="pending">Pending</option>
            <option value="processed">Processed</option>
            <option value="shipped">Shipped</option>
            <option value="delivered">Delivered</option>
          </select>
          <button type="submit">Add Order</button>
        </form>


        <form id="editSaleForm">
          <h3>Edit Sale</h3>
          <label for="e-order-id">Enter Order ID to update:</label>
          <input id="e-order-id" name="order-id" required type="number" onchange="handleEditField()"/>
          <label for="e-customer-name">Customer Name:</label>
          <input id="e-customer-name" name="customer-name" required type="text" />
          <label for="e-customer-contact">Customer Telephone:</label>
          <input
                  id="e-customer-contact"
                  name="customer-contact"
                  min="0"
                  minlength="10"
                  required
                  type="number"
          />
          <label for="e-customer-shipping">Shipping Information:</label>
          <input
                  id="e-customer-shipping"
                  name="customer-shipping"
                  required
                  type="text"
          />
          <!--<label for="e-product-category">Product Category:</label>
          <select id="e-product-category" name="product-category" required>
            <option value="Small">Small (100g)</option>
            <option value="Medium">Medium (250g)</option>
            <option value="Large">Large (500g)</option>
            <option value="Extra Large">Extra Large (1kg)</option>
            <option value="Family Pack">Family Pack (2kg)</option>
            <option value="Bulk Pack">Bulk Pack (5kg)</option>
            <option value="Premium">Premium (custom weight)</option>
          </select>
          <label for="e-quantity-ordered">Quantity Ordered:</label>
          <input
                  id="e-quantity-ordered"
                  name="quantity-ordered"
                  required
                  type="number"
          />
          <label for="e-unit-price">Price per category:</label>

          <input id="e-unit-price" name="unit-price" required type="number" />-->

          <label for="e-order-status">Order Status:</label>
          <select id="e-order-status" name="order-status" required>
            <option value="pending">Pending</option>
            <option value="processed">Processed</option>
            <option value="shipped">Shipped</option>
            <option value="delivered">Delivered</option>
          </select>
          <button type="submit">Edit Order</button>

        </form>

        <form id="listByStatus" >
          <h3>List orders by status</h3>
          <label for="l-order-status">Order Status:</label>

          <select id="l-order-status" name="order-status" required onchange="displaySalesTableByStatus()">
            <option value="all">All</option>
            <option value="pending">Pending</option>
            <option value="processed">Processed</option>
            <option value="shipped">Shipped</option>
            <option value="delivered">Delivered</option>
          </select>
        </form>

        <form id="listByCategory" >
          <h3>List orders by Category</h3>
          <label for="l-product-category">Product Category:</label>
          <select id="l-product-category" name="product-category" required onchange="displaySalesTableByCategory()">
            <option value="all">All</option>
            <option value="Small">Small (100g)</option>
            <option value="Medium">Medium (250g)</option>
            <option value="Large">Large (500g)</option>
            <option value="Extra Large">Extra Large (1kg)</option>
            <option value="Family Pack">Family Pack (2kg)</option>
            <option value="Bulk Pack">Bulk Pack (5kg)</option>
            <option value="Premium">Premium (custom weight)</option>
          </select>

        </form>

        <form id="listByCustomer" >
          <h3>List orders by Customer</h3>
          <label for="l-customer-name">Customer Name:</label>
          <input id="l-customer-name" name="customer-name" required type="text" onchange="displaySalesTableByCustomer() "/>
        </form>



        <div class="table-container">

          <table id="orders-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Order Date</th>
                <th>Customer Name</th>
                <th>Contact</th>
                <th>Shipping Info</th>
                <th>Category</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total Price</th>
                <th>Status</th>
                <th>Category Price per kg</th>
                <th>Revenue</th>
                <th>Profit</th>
              </tr>
            </thead>
            <tbody>
              <!-- Order entries will go here -->
            </tbody>
          </table>
        </div>

        <div id="sales-report">
          <h2>Sales Report</h2>
          <div id="report-container">
            <!-- Sales report will be generated here -->
          </div>
          <div class="graph">
            <canvas id="salesChart" width="400" height="200"></canvas>

          </div>
        </div>
      </section>
      <section id="finance">
        <h2>Financial Analysis</h2>
        <div class="table-container">

          <form id="financeForm" >
            <label for="start-date-fi">Start Date</label>
            <input type="date" name="" id="start-date-fi" required onchange="showFinanceTable()">
            <label for="end-date-fi">End Date</label>
            <input type="date" name="" id="end-date-fi" required onchange="showFinanceTable()">
            <button type="submit">Export report to csv</button>
          </form>

          <table id="financeTable">
            <caption></caption>
            <thead>
            <tr>
              <th>Money Earned from Sales (Income) (Revenue)</th>
              <th>Money Spent on Raw Blueberries (Expense)</th>
              <th>Profit without Tax</th>
              <th>Tax(%18) of income</th>
              <th>Net Profit</th>

            </tr>
            </thead>
            <tbody>

            </tbody>

          </table>
        </div>
<!--        <button onclick="exportFinanceToCSV()">Export to csv</button>-->

      </section>
      <section id="inventory">
        <h2>Inventory Management</h2>
        <div class="table-container">
          <table id="inventoryTrackingTable2">
            <caption>
              Inventory Tracking
            </caption>
            <thead>
            <tr>
              <th>ID:</th>
              <th>Category</th>
              <th>Stock Level</th>
              <th>Total Kilos</th>
              <th>Reorder Level</th>
              <th>Restock Date</th>
              <th>Storage Location</th>
              <th>Info</th>
            </tr>
            </thead>

            <tbody>
            <tr>
              <th>1</th>
              <th>Small</th>
              <th>100</th>
              <th>10</th>
              <th>5</th>
              <th>2003-06-02</th>
              <th>Warehouse</th>
              <th>STOCKS ARE LOW!</th>
            </tr>
            </tbody>
          </table>
        </div>

        <button onclick="exportInventoryToCSV()">Export Inventory to CSV</button>

      </section>


      <section id="report">
         <h2>Report</h2>
        <form id="reportForm" >
          <label for="start-date-r">Start Date</label>
          <input type="date" name="" id="start-date-r" required onchange="displayCSVTable(createCSV())" >
          <label for="end-date-r">End Date</label>
          <input type="date" name="" id="end-date-r" required  onchange="displayCSVTable(createCSV())" >
          <button type="submit">Export report to csv</button>
        </form>
       <div class="table-container">
         <table id="csvTable">
           <caption></caption>
           <thead></thead>
           <tbody></tbody>
         </table>
       </div>
      </section>


    </main>
  </body>
</html>
